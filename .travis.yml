# Config copied from
#  http://www.theautomatedtester.co.uk/blog/2012/using-travis-ci-for-building-and-testing-firefox-addons.html
# Use node_js because there are maybe more workers?
language: python
python:
  - "2.7"
addons:
  # Firefox 31 doesn't seem to be available on travis-ci.org yet.
  firefox: "30.0"
before_install:
  - wget -q https://ftp.mozilla.org/pub/mozilla.org/labs/jetpack/addon-sdk-1.16.tar.gz
  - tar xpzf addon-sdk-1.16.tar.gz
  - cd addon-sdk-1.16; source bin/activate; cd -
install:
  - sudo apt-get -qq install libxml2-dev libxslt-dev python-dev
  - pip install --user -r requirements.txt
before_script:
  - sh -e /etc/init.d/xvfb start
env:
  - DISPLAY=':99.0'
script: source test.sh
